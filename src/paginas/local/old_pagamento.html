<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <title>AeroPuc - Página de Pagamento</title>
    <script src="/src/javascripts/local/realizar_pagamento.js"></script>
    <link rel="stylesheet" href="/src/assets/css/pagina_pagamento.css">

    
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <div id="nav-bar-local-pronta"></div>
    <script>
      // requisição para carregar o conteúdo do arquivo
      fetch('/src/agregados/navbar/nav_local.html') // se necessario, trocar o nome do arquivo aqui
          .then(response => response.text())
          .then(data => {
              
              var elemento = document.getElementById('nav-bar-local-pronta'); // trocar o nome do elemento
  
              // inserir o conteúdo HTML no elemento
              elemento.innerHTML = data;
          })
          .catch(error => console.error('Erro ao carregar o arquivo:', error));
    </script>

    <h1 style="margin-top: 20px;">Detalhes do Pagamento</h1><br>
    <div id="form">
        <form>

            <label for="metodo_pagamento">Método de Pagamento:</label>
            <select id="metodo_pagamento" name="metodo_pagamento" onchange="mostrarCampos(this.value)" required>
                <option value="n/a">Escolher um método</option>
                <option value="cartao_credito">Cartão de Crédito</option>
                <option value="cartao_debito">Cartão de Débito</option>
                <option value="pix">PIX</option>
            </select><br>
            <label for="nome">Nome completo:</label>
            <input type="text" id="nome" name="nome" required><br>

            <label for="email">Email:</label>
            <input type="text" id="email" name="email" placeholder="exemplo@email.com" required><br>
            
            <div id="cartao_credito_campos" class="campos">
                
                <label for="nomeCartao">Nome no cartão:</label>
                <input type="text" id="nomeCartao" name="nomeCartao" placeholder="Ex.: NOME SOBRENOME" required><br>

                <label for="numeroCartao">Número do cartão:</label>
                <input type="text" id="numeroCartao" name="numeroCartao" placeholder="Ex.: 1234 5678 5814 9711" required><br>
        
                <label for="validadeCartao">Data de validade:</label>
                <input type="month" id="validadeCartao" name="validadeCartao" min="2023-12" required/><br>

                <label for="cvcCartao">CVC:</label>
                <input type="text" id="cvcCartao" name="cvcCartao" placeholder="Ex.: 234" required><br>
            </div>
            
            <div id="cartao_debito_campos" class="campos">

                <label for="nomeCartao">Nome no cartão:</label>
                <input type="text" id="nomeCartao" name="nomeCartao" placeholder="Ex.: NOME SOBRENOME" required><br>

                <label for="numeroCartao">Número do cartão:</label>
                <input type="text" id="numeroCartao" name="numeroCartao" placeholder="Ex.: 1234 5678 5814 9711" required><br>
        
                <label for="validadeCartao">Data de validade:</label>
                <input type="text" id="validadeCartao" name="validadeCartao" min="2023-12" required/><br>

                <label for="cvcCartao">CVC:</label>
                <input type="text" id="cvcCartao" name="cvcCartao"placeholder="Ex.: 234" required><br>
            </div>

            
            <div id="pix_campos" class="campos">
                <label for="numeroPix">Número do PIX:</label>
                <input type="text" id="numeroPix" name="numeroPix" value="00020101021226AeroPuc-Pix" readonly>
                <button onclick="copiarNumeroPix()">Copiar</button>
                <span id="mensagemCopiado" style="color: green;"></span>
            </div>
            
            <button type="button" onclick="validarDadosRecebidos();">Pagar</button>
            
            <script>
                function mostrarCampos(valor) {
                    var camposCartao = document.getElementById("cartao_credito_campos");
                    var camposDebito = document.getElementById("cartao_debito_campos");
                    var camposPix = document.getElementById("pix_campos");
            
                    camposCartao.style.display = "none";
                    camposDebito.style.display = "none";
                    camposPix.style.display = "none";
            
                    if (valor === "cartao_credito") {
                        camposCartao.style.display = "block";
                    } else if (valor === "cartao_debito") {
                        camposDebito.style.display = "block";
                    } else if (valor === "pix") {
                        camposPix.style.display = "block";
                    }
                }

                function validarNumeroCartao(numeroCartao) {
                    // Verifica se o número do cartão tem exatamente 16 dígitos
                    // '^': Indica o início da string.
                    // '\d': Representa qualquer dígito numérico.
                    // {16}: Indica que o caractere anterior (no caso, \d) deve ocorrer exatamente 16 vezes.
                    // $: Indica o final da string
                    return /^\d{16}$/.test(numeroCartao);
                }

                function copiarNumeroPix() {
                    var numeroPixInput = document.getElementById("numeroPix");
                    numeroPixInput.select();
                    document.execCommand("copy");

                    var mensagemCopiado = document.getElementById("mensagemCopiado");
                    mensagemCopiado.innerText = "Copiado!";

                    setTimeout(function() {
                        mensagemCopiado.innerText = "";
                    }, 2000); 
                }
            </script>
            
        </form>
    </div>
    <p id="status"></p>

</body>
</html>
